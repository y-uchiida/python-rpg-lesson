# 開発パート08: 所持金機能とアイテム購入を実装する

アイテムを実装できたので、使い道とアイテムの獲得方法を広げてみましょう。  
敵キャラクターを倒した際にお金を入手できるようにし、お店でアイテムを購入できるようにしていきます。

このパートで実装すべき機能は、以下の通りです。

1. 味方キャラクターの一覧クラスに、所持金を管理する変数を追加する
2. 敵を全滅させた際に、所持金を増加させる
3. 戦闘終了後のコマンド選択で、お店で買い物するコマンドを追加する

順番に実装方法を確認していきます。

## 1. 味方キャラクターの一覧クラスに、所持金を管理する変数を追加する

味方キャラクターの一覧クラスのメンバ変数を追加します。  

| 項目名 | 型 | 備考
| --- | --- | ---
| 所持金 | int | 味方キャラクターが所持しているお金の量

ゲームバランスを考慮しつつ、コンストラクタに所持金の初期値を設定しましょう。

## 2. 敵を全滅させた際に、所持金を増加させる

戦闘終了時に、所持金を増加させる処理を追加します。所持金の変数を操作するだけで済みます。

## 3. 戦闘終了後のコマンド選択に、お店で買い物するコマンドを追加する

パート07 でアイテム利用を追加したように、新しいコマンド番号を追加しましょう。  

ここまでの演習の中で実装してきた内容を組み合わせれば作成できますので、詳細な説明は割愛します。  
自分のプログラムを見直しつつ、実装方法を考えてみてください。

## 4. 動作の確認

所持金の獲得とアイテムの購入を実装したら、動作に問題がないかを確かめていきます。
すくなくとも、以下のパターンでエラーが起こらないことを確認してください。

:white_check_mark: お店で購入したアイテムを使用した際に、おかしな動作にならないか（所持数がおかしくなるなど）  
:white_check_mark: 所持金を超える金額のアイテムを購入できてしまわないか  
:white_check_mark: 所持金の上限を設定できているか、所持金がマイナスになったりしないか  
